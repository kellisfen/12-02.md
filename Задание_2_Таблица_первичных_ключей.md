# Задание 2: Анализ первичных ключей таблиц Sakila

> **Цель задания:** Составить таблицу соответствия названий таблиц восстановленной базы данных Sakila и их первичных ключей.

## Описание

В рамках данного задания была проанализирована структура всех объектов базы данных Sakila. База данных содержит 23 объекта, включая обычные таблицы и представления (VIEW). Для каждого объекта определен тип первичного ключа или указано отсутствие такового для представлений.

## Методология анализа

Анализ проводился с использованием следующих SQL команд:
- `SHOW TABLES` - для получения списка всех объектов
- `DESCRIBE table_name` - для анализа структуры каждой таблицы
- `SHOW CREATE TABLE table_name` - для определения типа объекта (TABLE или VIEW)

## Результаты анализа

### Таблица соответствия названий таблиц и первичных ключей

| № | Название таблицы | Название первичного ключа | Тип объекта | Примечание |
|---|------------------|---------------------------|-------------|------------|
| 1 | `actor` | `actor_id` | TABLE | Автоинкремент |
| 2 | `actor_info` | НЕТ | VIEW | Представление |
| 3 | `address` | `address_id` | TABLE | Автоинкремент |
| 4 | `category` | `category_id` | TABLE | Автоинкремент |
| 5 | `city` | `city_id` | TABLE | Автоинкремент |
| 6 | `country` | `country_id` | TABLE | Автоинкремент |
| 7 | `customer` | `customer_id` | TABLE | Автоинкремент |
| 8 | `customer_list` | НЕТ | VIEW | Представление |
| 9 | `film` | `film_id` | TABLE | Автоинкремент |
| 10 | `film_actor` | `actor_id` + `film_id` | TABLE | Составной ключ |
| 11 | `film_category` | `film_id` + `category_id` | TABLE | Составной ключ |
| 12 | `film_list` | НЕТ | VIEW | Представление |
| 13 | `film_text` | `film_id` | TABLE | Связанный с film |
| 14 | `inventory` | `inventory_id` | TABLE | Автоинкремент |
| 15 | `language` | `language_id` | TABLE | Автоинкремент |
| 16 | `nicer_but_slower_film_list` | НЕТ | VIEW | Представление |
| 17 | `payment` | `payment_id` | TABLE | Автоинкремент |
| 18 | `rental` | `rental_id` | TABLE | Автоинкремент |
| 19 | `sales_by_film_category` | НЕТ | VIEW | Представление |
| 20 | `sales_by_store` | НЕТ | VIEW | Представление |
| 21 | `staff` | `staff_id` | TABLE | Автоинкремент |
| 22 | `staff_list` | НЕТ | VIEW | Представление |
| 23 | `store` | `store_id` | TABLE | Автоинкремент |

## Статистика анализа

### Распределение по типам объектов

| Тип объекта | Количество | Процент |
|-------------|------------|---------|
| **Таблицы (TABLE)** | 16 | 69.6% |
| **Представления (VIEW)** | 7 | 30.4% |
| **Всего объектов** | 23 | 100% |

### Типы первичных ключей

| Тип первичного ключа | Количество | Примеры |
|---------------------|------------|---------|
| **Простой автоинкремент** | 14 | `actor_id`, `customer_id`, `film_id` |
| **Составной ключ** | 2 | `actor_id + film_id`, `film_id + category_id` |
| **Без первичного ключа** | 7 | Все представления (VIEW) |

## Детальный анализ

### Обычные таблицы с автоинкрементом (14 таблиц)
Большинство таблиц используют простые первичные ключи с автоинкрементом:
- Справочники: `actor`, `address`, `category`, `city`, `country`, `language`
- Основные сущности: `customer`, `film`, `inventory`, `payment`, `rental`, `staff`, `store`
- Дополнительные: `film_text`

### Таблицы с составными ключами (2 таблицы)
- `film_actor` - связь многие-ко-многим между фильмами и актерами
- `film_category` - связь многие-ко-многим между фильмами и категориями

### Представления без первичных ключей (7 объектов)
Представления предоставляют готовые выборки данных для удобства использования:
- Информационные: `actor_info`, `customer_list`, `film_list`, `staff_list`
- Аналитические: `sales_by_film_category`, `sales_by_store`
- Оптимизированные: `nicer_but_slower_film_list`

## Выводы

1. **Структура базы данных хорошо нормализована** - большинство таблиц имеют простые первичные ключи
2. **Правильно реализованы связи многие-ко-многим** через составные ключи
3. **Представления обеспечивают удобный доступ** к часто используемым выборкам данных
4. **Соблюдены соглашения именования** - все первичные ключи имеют суффикс `_id`

## Связь с Заданием 1

Данная таблица создана на основе анализа структуры базы данных, восстановленной в рамках [Задания 1](./Задание_1_Скриншоты_команд.md). Использованы команды `DESCRIBE` для каждой таблицы, результаты которых представлены в файле со скриншотами.

---

*Анализ выполнен: 2025-07-08*  
*База данных: Sakila (демонстрационная база MySQL)*  
*СУБД: MariaDB 10.4.32*
