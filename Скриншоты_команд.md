# Задание 1: Скриншоты выполненных команд

> **Цель задания:** Продемонстрировать практические навыки работы с пользователями MySQL/MariaDB, управления правами доступа и работы с базой данных Sakila.

## Содержание

1. [Создание пользователя sys_temp](#1-создание-пользователя-sys_temp)
2. [Список пользователей в базе данных](#2-список-пользователей-в-базе-данных)
3. [Предоставление прав пользователю](#3-предоставление-всех-прав-пользователю-sys_temp)
4. [Проверка прав пользователя](#4-список-прав-для-пользователя-sys_temp)
5. [Создание базы данных Sakila](#5-создание-базы-данных-sakila)
6. [Анализ структуры базы данных](#6-список-таблиц-в-базе-данных-sakila)
7. [Структура основных таблиц](#7-структура-основных-таблиц)
8. [Информация о версии СУБД](#8-информация-о-версии-mysqlmariadb)

---

## 1. Создание пользователя sys_temp

**Команда:** Создание нового пользователя с паролем для локального подключения.
```sql
MariaDB [(none)]> CREATE USER 'sys_temp'@'localhost' IDENTIFIED BY 'password123';
Query OK, 0 rows affected (0.025 sec)
```

**Результат:** ✅ Пользователь `sys_temp` успешно создан с паролем для локального подключения.

---

## 2. Список пользователей в базе данных

**Команда:** Получение списка всех пользователей в системе управления базами данных.
```sql
MariaDB [(none)]> SELECT User, Host FROM mysql.user;
+----------+-----------+
| User     | Host      |
+----------+-----------+
| root     | 127.0.0.1 |
| root     | ::1       |
| pma      | localhost |
| root     | localhost |
| sys_temp | localhost |
+----------+-----------+
5 rows in set (0.015 sec)
```

**Результат:** ✅ В системе найдено 5 пользователей, включая созданного `sys_temp@localhost`.

**Анализ пользователей:**
- `root@127.0.0.1` - администратор для IPv4 loopback
- `root@::1` - администратор для IPv6 loopback
- `pma@localhost` - пользователь phpMyAdmin
- `root@localhost` - локальный администратор
- `sys_temp@localhost` - созданный пользователь

---

## 3. Предоставление всех прав пользователю sys_temp

**Команда:** Назначение полных привилегий пользователю с правом передачи прав другим пользователям.
```sql
MariaDB [(none)]> GRANT ALL PRIVILEGES ON *.* TO 'sys_temp'@'localhost' WITH GRANT OPTION;
Query OK, 0 rows affected (0.003 sec)

MariaDB [(none)]> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.001 sec)
```

**Результат:** ✅ Пользователю `sys_temp` предоставлены все привилегии на все базы данных с правом передачи прав.

**Объяснение команд:**
- `GRANT ALL PRIVILEGES ON *.*` - предоставляет все права на все базы данных
- `WITH GRANT OPTION` - позволяет пользователю передавать права другим пользователям
- `FLUSH PRIVILEGES` - применяет изменения в правах немедленно

---

## 4. Список прав для пользователя sys_temp

**Команда:** Проверка назначенных привилегий для созданного пользователя.
```sql
MariaDB [(none)]> SHOW GRANTS FOR 'sys_temp'@'localhost';
+--------------------------------------------------------------------------------------------------------------------------------------------+
| Grants for sys_temp@localhost                                                                                                              |
+--------------------------------------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO `sys_temp`@`localhost` IDENTIFIED BY PASSWORD '*A0F874BC7F54EE086FCE60A37CE7887D8B31086B' WITH GRANT OPTION |
+--------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.000 sec)
```

**Результат:** ✅ Подтверждено, что пользователь `sys_temp` имеет все привилегии на все базы данных с правом передачи прав.

**Анализ прав:**
- `ALL PRIVILEGES ON *.*` - полные права на все базы данных и таблицы
- `WITH GRANT OPTION` - право передавать привилегии другим пользователям
- Пароль зашифрован и хранится в безопасном виде

---

## 5. Создание базы данных sakila

**Команда:** Создание новой базы данных для работы с демонстрационными данными.
```sql
MariaDB [(none)]> CREATE DATABASE sakila;
Query OK, 1 row affected (0.002 sec)
```

**Результат:** ✅ База данных `sakila` успешно создана.

> **Примечание:** База данных Sakila - это демонстрационная база данных MySQL, содержащая данные о прокате DVD фильмов. Она включает таблицы для фильмов, актеров, клиентов, платежей и других связанных сущностей.

---

## 6. Список таблиц в базе данных sakila

**Команда:** Получение списка всех таблиц и представлений в базе данных после восстановления дампа.
```sql
MariaDB [sakila]> SHOW TABLES;
+----------------------------+
| Tables_in_sakila           |
+----------------------------+
| actor                      |
| actor_info                 |
| address                    |
| category                   |
| city                       |
| country                    |
| customer                   |
| customer_list              |
| film                       |
| film_actor                 |
| film_category              |
| film_list                  |
| film_text                  |
| inventory                  |
| language                   |
| nicer_but_slower_film_list |
| payment                    |
| rental                     |
| sales_by_film_category     |
| sales_by_store             |
| staff                      |
| staff_list                 |
| store                      |
+----------------------------+
23 rows in set (0.001 sec)
```

**Результат:** ✅ База данных содержит 23 объекта (таблицы и представления).

**Анализ структуры базы данных:**

**Основные таблицы данных (16 таблиц):**
- `actor`, `address`, `category`, `city`, `country` - справочные данные
- `customer`, `film`, `inventory`, `language`, `payment`, `rental`, `staff`, `store` - основные бизнес-сущности
- `film_actor`, `film_category`, `film_text` - связующие и дополнительные таблицы

**Представления (7 VIEW):**
- `actor_info`, `customer_list`, `film_list`, `nicer_but_slower_film_list` - информационные представления
- `sales_by_film_category`, `sales_by_store`, `staff_list` - аналитические представления

---

## 7. Структура основных таблиц

**Команда:** Анализ структуры ключевых таблиц базы данных для понимания схемы данных.

### 7.1. Таблица actor (Актеры)

**Назначение:** Хранение информации об актерах, участвующих в фильмах.

```sql
MariaDB [sakila]> DESCRIBE actor;
+-------------+----------------------+------+-----+---------------------+-------------------------------+
| Field       | Type                 | Null | Key | Default             | Extra                         |
+-------------+----------------------+------+-----+---------------------+-------------------------------+
| actor_id    | smallint(5) unsigned | NO   | PRI | NULL                | auto_increment                |
| first_name  | varchar(45)          | NO   |     | NULL                |                               |
| last_name   | varchar(45)          | NO   | MUL | NULL                |                               |
| last_update | timestamp            | NO   |     | current_timestamp() | on update current_timestamp() |
+-------------+----------------------+------+-----+---------------------+-------------------------------+
```

**Анализ структуры:**
- `actor_id` - первичный ключ с автоинкрементом (до 65,535 записей)
- `first_name` - имя актера (обязательное поле, до 45 символов)
- `last_name` - фамилия актера (индексированное поле для быстрого поиска)
- `last_update` - автоматическое отслеживание времени изменений

### 7.2. Таблица customer (Клиенты)

**Назначение:** Хранение информации о клиентах видеопроката.
```sql
MariaDB [sakila]> DESCRIBE customer;
+-------------+----------------------+------+-----+---------------------+-------------------------------+
| Field       | Type                 | Null | Key | Default             | Extra                         |
+-------------+----------------------+------+-----+---------------------+-------------------------------+
| customer_id | smallint(5) unsigned | NO   | PRI | NULL                | auto_increment                |
| store_id    | tinyint(3) unsigned  | NO   | MUL | NULL                |                               |
| first_name  | varchar(45)          | NO   |     | NULL                |                               |
| last_name   | varchar(45)          | NO   | MUL | NULL                |                               |
| email       | varchar(50)          | YES  |     | NULL                |                               |
| address_id  | smallint(5) unsigned | NO   | MUL | NULL                |                               |
| active      | tinyint(1)           | NO   |     | 1                   |                               |
| create_date | datetime             | NO   |     | NULL                |                               |
| last_update | timestamp            | NO   |     | current_timestamp() | on update current_timestamp() |
+-------------+----------------------+------+-----+---------------------+-------------------------------+
```

**Анализ структуры:**
- `customer_id` - первичный ключ с автоинкрементом
- `store_id` - внешний ключ на таблицу магазинов (индексированное поле)
- `first_name`, `last_name` - имя и фамилия клиента
- `email` - электронная почта (может быть NULL)
- `address_id` - внешний ключ на таблицу адресов
- `active` - статус активности клиента (по умолчанию активен)
- `create_date` - дата создания записи
- `last_update` - автоматическое отслеживание изменений

---

## 8. Информация о версии MySQL/MariaDB

**Команда:** Получение информации о версии и конфигурации СУБД.
```bash
C:\xampp\mysql\bin\mysql.exe  Ver 15.1 Distrib 10.4.32-MariaDB, for Win64 (AMD64)
Server version: 10.4.32-MariaDB mariadb.org binary distribution
```

**Результат:** ✅ Система работает на MariaDB версии 10.4.32.

**Технические характеристики:**
- **Клиент:** mysql.exe версии 15.1
- **Сервер:** MariaDB 10.4.32
- **Платформа:** Windows 64-bit (AMD64)
- **Дистрибутив:** Официальная сборка mariadb.org
- **Среда:** XAMPP (интегрированный веб-сервер)

---

## Заключение

✅ **Все задания выполнены успешно:**

1. **Управление пользователями:** Создан пользователь `sys_temp` с полными правами
2. **Работа с базой данных:** Создана и настроена база данных Sakila
3. **Анализ структуры:** Проанализированы 23 объекта базы данных
4. **Документирование:** Созданы подробные скриншоты всех операций

**Практические навыки продемонстрированы:**
- Создание и управление пользователями MySQL/MariaDB
- Назначение и проверка привилегий
- Работа с демонстрационной базой данных
- Анализ структуры таблиц и их взаимосвязей
- Использование команд DDL (Data Definition Language)

**Следующие шаги:** Переход к выполнению Задания 2 - создание таблицы первичных ключей.

---

*Документ создан: 2025-07-08*
*Среда выполнения: MariaDB 10.4.32 на Windows через XAMPP*
